

docker 安装

```
docker run --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server:2.0.1 //该版本有问题
```

```
docker run --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server:1.1.3
```

linux 安装

安装 jdk 

```
yum install java-1.8.0-openjdk.x86_64
```

安装 git

```
yum -y install git
```









Eureka 的最大竞争对手是 Nacos

SpringCloudAlibaba 对 SringCloud 组件进行了一些扩展

学习框架，学习思想

RPC  存在的问题

超时问题：客户端发送请求到服务端，服务端没有及时响应给客户端

连接不上：服务端已经宕机

安全问题

加密 ,https,单点登录，令牌，限流，降级，服务保护

服务与服务之间的 url 地址管理

服务治理

如果没有注册中心，会暴露一个 IP 地址和端口号，如果地址变了，会调不通，我们一般会把地址改成新的

服务与服务之间的依赖关系是非常复杂的，如果接口写死的情况下，后期接口发生变化的情况下，需要人工去修改接口，然后重新发布，效率非常低。

RPC 框架 HttpClient



注册中心基本概念

存放接口调用地址

接口地址：IP : 端口，接口名称

特点：实现动态感知，感知上线下线的服务



注册中心实现原理;

微服务架构常见名词

生产者：提供接口给其他服务调用，启动后，IP和端口号会存放到注册中心

消费者：调用其他服务的接口，根据服务名称，从注册中心查找接口地址，注册中心返回多个接口地址给消费者

注册中心：存放调用的接口和动态感知

保存，key ：服务名称，value:服务调用地址

服务注册：把当前服务的接口地址注册到注册中心

负载均衡器：消费者采用负载均衡器，在多个地址里面选择一个地址进行 RPC 远程调用，这个负载均衡是本地负载均衡，和 nginx 不同，nginx 属于服务器负载均衡



消费者调用逻辑

1、根据服务名称，从注册中心获取最新的调用接口的地址列表

2、使用本地负载均衡器，选择一个地址调用

3、使用 http 调用接口



心跳检测

如果服务宕机，就会自动剔除，消费者就不会获得调用不了的地址

服务下线原理



### 参考资料

> docker 安装
>
> https://www.cnblogs.com/jeecg158/p/14029453.html

